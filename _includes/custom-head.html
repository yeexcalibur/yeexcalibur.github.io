{%- assign v = site.github.build_revision | default: site.time | date: '%s' -%}

{%- comment -%} ① 使用内联 SVG 图标（优先级最高，不走缓存） {%- endcomment -%}
<link rel="icon" type="image/svg+xml"
      href='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"><text x="50%" y="58%" dominant-baseline="middle" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="64" fill="%23B77466">Yee</text></svg>'>

{%- comment -%} ② 清除缓存并强制更新 favicon 图标 {%- endcomment -%}
<script>
(function(){
  // 使用内联 SVG 作为图标
  const svg = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"><text x="50%" y="58%" dominant-baseline="middle" text-anchor="middle" font-family="Helvetica,Arial,sans-serif" font-size="64" fill="%23B77466">Yee</text></svg>';

  // 通过 JS 强制清除缓存并重置图标
  const linkTags = document.querySelectorAll('link[rel*="icon"]');
  linkTags.forEach(link => link.parentNode.removeChild(link));

  // 强制更新 favicon 使用 SVG 数据
  const link = document.createElement('link');
  link.rel = 'icon';
  link.type = 'image/svg+xml';
  link.href = svg;
  document.head.appendChild(link);

  // 同时清除网页缓存
  localStorage.clear(); // 清空浏览器缓存（存储的数据）
  sessionStorage.clear(); // 清除会话缓存
})();
</script>
